# ìš´ì˜ ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸ (Operational Checklist)

í”„ë¡œë•ì…˜ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ê³¼ ì„±ëŠ¥ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ ì •ê¸° ì ê²€ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ë°°í¬ í›„ ì¦‰ì‹œ í™•ì¸ (5ë¶„ ì´ë‚´)

### í—¬ìŠ¤ì²´í¬

```bash
# API ì„œë²„ í—¬ìŠ¤ì²´í¬
curl https://api.yourdomain.com/health
# ì˜ˆìƒ ì‘ë‹µ: {"ok":true,"ts":"2024-01-15T..."}

# WebSocket ì—°ê²° í…ŒìŠ¤íŠ¸ (ë¸Œë¼ìš°ì € ì½˜ì†”)
const socket = io('https://api.yourdomain.com');
socket.on('connect', () => console.log('âœ… Connected'));
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ GET /health â†’ 200 OK
â–¡ MongoDB ì—°ê²° ì •ìƒ
â–¡ Redis ì—°ê²° ì •ìƒ
â–¡ S3/MinIO ì—°ê²° ì •ìƒ
â–¡ WebSocket í•¸ë“œì…°ì´í¬ ì„±ê³µ
```

---

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

```bash
# 1. íšŒì›ê°€ì…
curl -X POST https://api.yourdomain.com/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test_user","password":"password123"}'
# ì˜ˆìƒ: 201 Created

# 2. ë¡œê·¸ì¸
curl -X POST https://api.yourdomain.com/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test_user","password":"password123"}'
# ì˜ˆìƒ: 200 OK + accessToken

# 3. ë³´í˜¸ëœ ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
curl https://api.yourdomain.com/messages?roomId=xxx \
  -H "Authorization: Bearer <token>"
# ì˜ˆìƒ: 200 OK
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ POST /auth/register â†’ 201
â–¡ POST /auth/login â†’ 200 + token
â–¡ WebSocket ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹ 
â–¡ GET /messages â†’ 200 (ì¸ì¦ë¨)
â–¡ POST /rooms/ensure â†’ 200 (ì¸ì¦ë¨)
```

---

## ì„±ëŠ¥ ì„ê³„ê°’ ëª¨ë‹ˆí„°ë§ (30ë¶„)

### ì—°ê²° ì˜¤ë¥˜ìœ¨

**ëª©í‘œ:** < 0.5%

```bash
# MongoDB ì—°ê²° ì˜¤ë¥˜ (Prometheus ì¿¼ë¦¬)
rate(mongodb_connection_errors_total[5m])

# Redis ì—°ê²° ì˜¤ë¥˜
rate(redis_connection_errors_total[5m])

# HTTP 5xx ì˜¤ë¥˜ìœ¨
sum(rate(http_requests_total{status=~"5.."}[5m])) /
sum(rate(http_requests_total[5m])) * 100
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ MongoDB ì—°ê²° ì˜¤ë¥˜ìœ¨ < 0.5%
â–¡ Redis ì—°ê²° ì˜¤ë¥˜ìœ¨ < 0.5%
â–¡ HTTP 5xx ì˜¤ë¥˜ìœ¨ < 1%
â–¡ WebSocket ì¬ì—°ê²°ìœ¨ < 5%
```

---

### ì‘ë‹µ ì‹œê°„ (P95 ê¸°ì¤€)

**ëª©í‘œ:**

| ì—”ë“œí¬ì¸íŠ¸ | P95 ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|-----------|---------|---------|
| GET /health | < 50ms | curl ë˜ëŠ” ëª¨ë‹ˆí„°ë§ |
| POST /auth/login | < 200ms | ë¡œë“œ í…ŒìŠ¤íŠ¸ |
| GET /messages | < 100ms | APM ë„êµ¬ |
| MongoDB ì¿¼ë¦¬ | < 50ms | Atlas Performance |
| Redis ëª…ë ¹ | < 5ms | redis-cli --latency |

```bash
# Redis ë ˆì´í„´ì‹œ ì¸¡ì •
redis-cli --latency
# min: 0, max: 1, avg: 0.1 (ms)

# MongoDB ìŠ¬ë¡œìš° ì¿¼ë¦¬ í™•ì¸
mongo "mongodb+srv://..." --eval "db.system.profile.find({millis:{$gt:100}}).sort({ts:-1}).limit(10)"
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ P95 ì‘ë‹µ ì‹œê°„ ëª©í‘œ ì¶©ì¡±
â–¡ ìŠ¬ë¡œìš° ì¿¼ë¦¬ ì—†ìŒ (> 100ms)
â–¡ N+1 ì¿¼ë¦¬ ì—†ìŒ
â–¡ ìºì‹œ íˆíŠ¸ìœ¨ > 80% (Redis)
```

---

### ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ 

**ëª©í‘œ:**

| ë¦¬ì†ŒìŠ¤ | ì„ê³„ê°’ | ì¡°ì¹˜ |
|--------|--------|------|
| API CPU | < 70% | ìŠ¤ì¼€ì¼ ì•„ì›ƒ |
| API Memory | < 80% | ë©”ëª¨ë¦¬ ë¦­ ì¡°ì‚¬ |
| MongoDB CPU | < 70% | ì¸ë±ìŠ¤ ìµœì í™” |
| Redis Memory | < 70% | ìºì‹œ ì •ë¦¬ |

```bash
# Kubernetes ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ 
kubectl top pods

# Docker Compose
docker stats
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ API ì„œë²„ CPU < 70%
â–¡ API ì„œë²„ Memory < 80%
â–¡ MongoDB CPU < 70%
â–¡ Redis Memory < 70%
â–¡ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ < 80%
```

---

### ë™ì‹œ ì—°ê²°

```bash
# MongoDB í˜„ì¬ ì—°ê²° ìˆ˜
mongo "mongodb+srv://..." --eval "db.serverStatus().connections"

# Redis í´ë¼ì´ì–¸íŠ¸ ìˆ˜
redis-cli INFO clients | grep connected_clients
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ MongoDB Connections < 80% of max (ê¸°ë³¸ 500)
â–¡ Redis Clients < 80% of max (ê¸°ë³¸ 10000)
â–¡ WebSocket ì—°ê²° ìˆ˜ ì •ìƒ (ì˜ˆìƒ ë²”ìœ„ ë‚´)
â–¡ ì—°ê²° í’€ ê³ ê°ˆ ì—†ìŒ
```

---

## ì•Œë¦¼ ì‹œìŠ¤í…œ í™•ì¸

### ì•Œë¦¼ ì±„ë„ ì‘ë™ í…ŒìŠ¤íŠ¸

```bash
# 1. í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ë°œì†¡
curl -X POST https://hooks.slack.com/services/YOUR/WEBHOOK \
  -H 'Content-Type: application/json' \
  -d '{"text":"ğŸš¨ Test Alert"}'

# 2. ë©”íŠ¸ë¦­ ìˆ˜ì§‘ í™•ì¸
curl http://localhost:9090/api/v1/targets  # Prometheus

# 3. ëŒ€ì‹œë³´ë“œ ì ‘ê·¼
open https://grafana.yourdomain.com
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
```
â–¡ Slack ì•Œë¦¼ ì •ìƒ ìˆ˜ì‹ 
â–¡ PagerDuty í†µí•© ì‘ë™ (ì‹¬ê°í•œ ì•Œë¦¼ë§Œ)
â–¡ Prometheus íƒ€ê²Ÿ ìˆ˜ì§‘ ì •ìƒ (all UP)
â–¡ Grafana ëŒ€ì‹œë³´ë“œ ë°ì´í„° í‘œì‹œ
â–¡ Winston ë¡œê·¸ ì§‘ê³„ ì •ìƒ
â–¡ APM íŠ¸ë ˆì´ìŠ¤ ìˆ˜ì§‘ (New Relic/Datadog)
```

---

## ì¼ì¼ ì ê²€ (ë§¤ì¼ ì˜¤ì „ 9ì‹œ)

```
â–¡ ì „ì¼ ì—ëŸ¬ ë¡œê·¸ ë¦¬ë·° (Slack #alerts)
â–¡ Grafana ëŒ€ì‹œë³´ë“œ í™•ì¸
  - íŠ¸ë˜í”½ ì¶”ì´
  - ì˜¤ë¥˜ìœ¨ (< 1%)
  - í‰ê·  ì‘ë‹µ ì‹œê°„
â–¡ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥  íŠ¸ë Œë“œ
â–¡ ë°±ì—… ìƒíƒœ í™•ì¸ (Atlas â†’ Backup)
â–¡ ë¯¸ì™„ë£Œ ì‘ì—… (pending jobs) í™•ì¸
```

---

## ì£¼ê°„ ì ê²€ (ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „)

```
### ì„±ëŠ¥ ë¶„ì„
â–¡ ì§€ë‚œ ì£¼ í‰ê·  ì‘ë‹µ ì‹œê°„
â–¡ P95, P99 ë ˆì´í„´ì‹œ ì¶”ì´
â–¡ ì˜¤ë¥˜ìœ¨ ë¶„ì„ (íƒ€ì…ë³„)
â–¡ íŠ¸ë˜í”½ íŒ¨í„´ ë³€í™”

### ë°ì´í„°ë² ì´ìŠ¤
â–¡ MongoDB ìŠ¬ë¡œìš° ì¿¼ë¦¬ Top 10
  Atlas â†’ Performance Advisor â†’ Query Performance
â–¡ ì¸ë±ìŠ¤ ì‚¬ìš©ë¥  í™•ì¸
  db.collection.aggregate([{$indexStats:{}}])
â–¡ Redis í‚¤ ë¶„í¬ ë¶„ì„
  redis-cli --bigkeys
â–¡ ìºì‹œ íˆíŠ¸ìœ¨ í™•ì¸
  redis-cli INFO stats | grep keyspace_hits

### ìš©ëŸ‰ ê´€ë¦¬
â–¡ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ì¶”ì„¸
â–¡ ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´
â–¡ íŠ¸ë˜í”½ ì¦ê°€ìœ¨ ê³„ì‚°
â–¡ ìŠ¤ì¼€ì¼ ì•„ì›ƒ í•„ìš”ì„± ê²€í† 

### ë³´ì•ˆ
â–¡ ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
  npm audit
  npm audit fix
â–¡ ë§Œë£Œ ì˜ˆì • ì¸ì¦ì„œ í™•ì¸ (30ì¼ ì´ë‚´)
â–¡ ì ‘ê·¼ ë¡œê·¸ ì´ìƒ íŒ¨í„´ ê²€í† 
```

---

## ì›”ê°„ ì ê²€ (ë§¤ì›” 1ì¼)

```
### ì„±ëŠ¥ ìµœì í™”
â–¡ ëŠë¦° API ì—”ë“œí¬ì¸íŠ¸ Top 10 í™•ì¸
â–¡ N+1 ì¿¼ë¦¬ íŒ¨í„´ íƒì§€
â–¡ ë¶ˆí•„ìš”í•œ ì¸ë±ìŠ¤ ì œê±°
â–¡ ì¿¼ë¦¬ í”Œëœ ìµœì í™”

### ìš©ëŸ‰ ê³„íš
â–¡ íŠ¸ë˜í”½ ì¦ê°€ ì˜ˆì¸¡ (ë‹¤ìŒ 3ê°œì›”)
â–¡ ë°ì´í„°ë² ì´ìŠ¤ ìš©ëŸ‰ ì¦ì„¤ í•„ìš”ì„±
â–¡ Redis ë©”ëª¨ë¦¬ ì¦ì„¤ ê³„íš
â–¡ CDN/S3 ìŠ¤í† ë¦¬ì§€ ì •ë¦¬

### ë¹„ìš© ìµœì í™”
â–¡ MongoDB Atlas ì‚¬ìš©ëŸ‰ ë¶„ì„
â–¡ AWS ë¦¬ì†ŒìŠ¤ ì‚¬ìš© ê²€í† 
â–¡ ë¯¸ì‚¬ìš© ë¦¬ì†ŒìŠ¤ ì œê±°
â–¡ ì˜ˆì•½ ì¸ìŠ¤í„´ìŠ¤ ê²€í† 

### ë³´ì•ˆ & ì»´í”Œë¼ì´ì–¸ìŠ¤
â–¡ ì ‘ê·¼ ê¶Œí•œ ì¬ê²€í† 
â–¡ ì‚¬ìš©ì ê³„ì • ì •ë¦¬ (í‡´ì‚¬ì)
â–¡ ë¡œê·¸ ë³´ê´€ ê¸°ê°„ ì¤€ìˆ˜ (GDPR)
â–¡ ë°±ì—… ì•”í˜¸í™” ìƒíƒœ í™•ì¸

### ë¬¸ì„œ ì—…ë°ì´íŠ¸
â–¡ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
â–¡ API ë¬¸ì„œ (Swagger)
â–¡ ìš´ì˜ í”Œë ˆì´ë¶
â–¡ ì˜¨ì½œ ë‹´ë‹¹ì ì •ë³´
```

---

## ë¶„ê¸°ë³„ ì ê²€ (ë¶„ê¸° ì²« ì£¼)

```
### ì¬í•´ ë³µêµ¬ í…ŒìŠ¤íŠ¸
â–¡ MongoDB PITR ë³µêµ¬ ë¦¬í—ˆì„¤
  (ìì„¸í•œ ë‚´ìš©: RECOVERY_PLAYBOOK.md)
â–¡ Redis AOF ë³µêµ¬ í…ŒìŠ¤íŠ¸
â–¡ ì „ì²´ ì‹œìŠ¤í…œ ë³µêµ¬ ì‹œë®¬ë ˆì´ì…˜
â–¡ DR ë¦¬ì „ ì „í™˜ í…ŒìŠ¤íŠ¸

### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
â–¡ ë¡œë“œ í…ŒìŠ¤íŠ¸ (k6, Artillery)
â–¡ ë™ì‹œ ì ‘ì† í•œê³„ í…ŒìŠ¤íŠ¸
â–¡ WebSocket ì—°ê²° ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸
â–¡ ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ í…ŒìŠ¤íŠ¸

### ë³´ì•ˆ ê°ì‚¬
â–¡ ì¹¨íˆ¬ í…ŒìŠ¤íŠ¸ (ì™¸ë¶€ ì—…ì²´)
â–¡ OWASP Top 10 ì ê²€
â–¡ API ë³´ì•ˆ ìŠ¤ìº”
â–¡ ì¸í”„ë¼ ë³´ì•ˆ ê·¸ë£¹ ê²€í† 

### ì•„í‚¤í…ì²˜ ë¦¬ë·°
â–¡ ê¸°ìˆ  ë¶€ì±„ í‰ê°€
â–¡ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬ í•„ìš”ì„±
â–¡ ë°ì´í„°ë² ì´ìŠ¤ ìƒ¤ë”© ê²€í† 
â–¡ ìºì‹œ ì „ëµ ìµœì í™”
```

---

## ì„±ëŠ¥ ì„ê³„ê°’ ìš”ì•½

### ğŸŸ¢ ì •ìƒ (Normal)

```
ì—°ê²° ì˜¤ë¥˜ìœ¨: < 0.5%
HTTP 5xx: < 1%
P95 ì‘ë‹µ ì‹œê°„: < 200ms
CPU ì‚¬ìš©ë¥ : < 70%
Memory ì‚¬ìš©ë¥ : < 80%
ë””ìŠ¤í¬ ì‚¬ìš©ë¥ : < 80%
```

### ğŸŸ¡ ê²½ê³  (Warning)

```
ì—°ê²° ì˜¤ë¥˜ìœ¨: 0.5% - 1%
HTTP 5xx: 1% - 2%
P95 ì‘ë‹µ ì‹œê°„: 200ms - 500ms
CPU ì‚¬ìš©ë¥ : 70% - 85%
Memory ì‚¬ìš©ë¥ : 80% - 90%
ë””ìŠ¤í¬ ì‚¬ìš©ë¥ : 80% - 90%

ì¡°ì¹˜: ëª¨ë‹ˆí„°ë§ ê°•í™”, ì›ì¸ ì¡°ì‚¬
```

### ğŸ”´ ì‹¬ê° (Critical)

```
ì—°ê²° ì˜¤ë¥˜ìœ¨: > 1%
HTTP 5xx: > 2%
P95 ì‘ë‹µ ì‹œê°„: > 500ms
CPU ì‚¬ìš©ë¥ : > 85%
Memory ì‚¬ìš©ë¥ : > 90%
ë””ìŠ¤í¬ ì‚¬ìš©ë¥ : > 90%

ì¡°ì¹˜: ì¦‰ì‹œ ìŠ¤ì¼€ì¼ ì•„ì›ƒ, ì˜¨ì½œ ë‹´ë‹¹ì í˜¸ì¶œ
```

---

## ì°¸ê³  ë¬¸ì„œ

- [DATABASE_SETUP.md](./DATABASE_SETUP.md) - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ê°€ì´ë“œ
- [RECOVERY_PLAYBOOK.md](./RECOVERY_PLAYBOOK.md) - ì¬í•´ ë³µêµ¬ ì ˆì°¨
- [Grafana Dashboard](https://grafana.yourdomain.com)
- [Prometheus Metrics](https://prometheus.yourdomain.com)
